{"version":3,"file":"router-composed-plugin.cjs","sources":["../../../src/core/router-composed-plugin.ts"],"sourcesContent":["import { getConfig } from '@tanstack/router-generator'\nimport { unpluginRouterGeneratorFactory } from './router-generator-plugin'\nimport { unpluginRouterCodeSplitterFactory } from './router-code-splitter-plugin'\nimport { unpluginRouterHmrFactory } from './router-hmr-plugin'\nimport { unpluginRouteAutoImportFactory } from './route-autoimport-plugin'\nimport type { Config } from './config'\nimport type { UnpluginFactory } from 'unplugin'\n\nexport const unpluginRouterComposedFactory: UnpluginFactory<\n  Partial<Config> | undefined\n> = (options = {}, meta) => {\n  const ROOT: string = process.cwd()\n  const userConfig = getConfig(options, ROOT)\n\n  const getPlugin = (pluginFactory: UnpluginFactory<Partial<Config>>) => {\n    const plugin = pluginFactory(options, meta)\n    if (!Array.isArray(plugin)) {\n      return [plugin]\n    }\n    return plugin\n  }\n\n  const routerGenerator = getPlugin(unpluginRouterGeneratorFactory)\n  const routerCodeSplitter = getPlugin(unpluginRouterCodeSplitterFactory)\n  const routeAutoImport = getPlugin(unpluginRouteAutoImportFactory)\n\n  const result = [...routerGenerator]\n  if (userConfig.autoCodeSplitting) {\n    result.push(...routerCodeSplitter)\n  }\n  if (userConfig.verboseFileRoutes === false) {\n    result.push(...routeAutoImport)\n  }\n\n  const isProduction = process.env.NODE_ENV === 'production'\n\n  if (!isProduction && !userConfig.autoCodeSplitting) {\n    const routerHmr = getPlugin(unpluginRouterHmrFactory)\n    result.push(...routerHmr)\n  }\n  return result\n}\n"],"names":["getConfig","routerGenerator","unpluginRouterGeneratorFactory","unpluginRouterCodeSplitterFactory","unpluginRouteAutoImportFactory","unpluginRouterHmrFactory"],"mappings":";;;;;;;AAQO,MAAM,gCAET,CAAC,UAAU,CAAA,GAAI,SAAS;AAC1B,QAAM,OAAe,QAAQ,IAAA;AAC7B,QAAM,aAAaA,gBAAAA,UAAU,SAAS,IAAI;AAE1C,QAAM,YAAY,CAAC,kBAAoD;AACrE,UAAM,SAAS,cAAc,SAAS,IAAI;AAC1C,QAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,aAAO,CAAC,MAAM;AAAA,IAChB;AACA,WAAO;AAAA,EACT;AAEA,QAAMC,oBAAkB,UAAUC,oDAA8B;AAChE,QAAM,qBAAqB,UAAUC,0DAAiC;AACtE,QAAM,kBAAkB,UAAUC,oDAA8B;AAEhE,QAAM,SAAS,CAAC,GAAGH,iBAAe;AAClC,MAAI,WAAW,mBAAmB;AAChC,WAAO,KAAK,GAAG,kBAAkB;AAAA,EACnC;AACA,MAAI,WAAW,sBAAsB,OAAO;AAC1C,WAAO,KAAK,GAAG,eAAe;AAAA,EAChC;AAEA,QAAM,eAAe,QAAQ,IAAI,aAAa;AAE9C,MAAI,CAAC,gBAAgB,CAAC,WAAW,mBAAmB;AAClD,UAAM,YAAY,UAAUI,wCAAwB;AACpD,WAAO,KAAK,GAAG,SAAS;AAAA,EAC1B;AACA,SAAO;AACT;;"}